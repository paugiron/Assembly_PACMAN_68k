00001AFA Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
<<<<<<< Updated upstream
Created On: 15/12/2022 9:44:11
=======
Created On: 15/12/2022 9:16:59
>>>>>>> Stashed changes

00000000                             1  ; ==============================================================================
00000000                             2  ; TITLE       : PAC-MAN 68000
00000000                             3  ; DESCRIPTION : GAME IN MOTOROLA 68000 BASED ON PAC-MAN GAME
00000000                             4  ; AUTHOR      : JORDI FLORIT ENSENYAT
00000000                             5  ;               JOSEP GABRIEL FORNES REYNES
00000000                             6  ;               PAU GIRON RODRIGUEZ
00000000                             7  ; ==============================================================================
00001000                             8              ORG    $1000
00001000                             9  
00001000                            10              INCLUDE "CONST.X68"
00001000                            11  ; ==============================================================================
00001000                            12  ; GAME CONSTANTS
00001000                            13  ; ==============================================================================
00001000                            14  
00001000                            15  ; --- PAC-MAN RELATED CONTANTS ----------------------------------------------------
00001000                            16  
00001000  =0000FFFF                 17  PMPCOL      EQU     $0000FFFF               ; PAC-MAN CONTOUR COLOR
00001000  =0000FFFF                 18  PMFCOL      EQU     $0000FFFF               ; PAC-MAN FILL COLOR
00001000  =00000002                 19  PMSPEED     EQU     2                       ; MAGNITUDE OF THE X AND Y VEL.
00001000  =00000008                 20  PMRAD       EQU     8                       ; PAC-MAN RADIUS
00001000                            21  
00001000                            22  ; --- GHOST RELATED CONSTANTS ----------------------------------------------------
00001000                            23  
00001000  =00000007                 24  GSTSPEED    EQU     7                       ; MAGNITUDE OF THE NORMAL DISPLACEMENT
00001000  =00000005                 25  GSTSPEED2   EQU     5                       ; MAGNITUDE OF THE ATACKED DISPLACEMENT
00001000                            26  
00001000  =000000FF                 27  GSTCOL1     EQU     $000000FF               ; GHOST 1 CONTOUR COLOR RED
00001000  =00FFFFFF                 28  GSTFCOL1    EQU     $00FFFFFF               ; GHOST 1 FILL COLOR WHITE
00001000  =00000002                 29  GSTINX1     EQU     2                       ; GHOST 1 INITIAL X
00001000  =00000002                 30  GSTINY1     EQU     2                       ; GHOST 1 INITIAL Y
00001000                            31  
00001000  =00FF0080                 32  GSTCOL2     EQU     $00FF0080               ; GHOST 2 CONTOUR COLOR PINK
00001000  =00000000                 33  GSTFCOL2    EQU     $00000000               ; GHOST 1 FILL COLOR
00001000  =00000002                 34  GSTINX2     EQU     2                       ; GHOST 2 INITIAL X
00001000  =0000001F                 35  GSTINY2     EQU     31                      ; GHOST 2 INITIAL Y
00001000                            36  
00001000  =00FFFF00                 37  GSTCOL3     EQU     $00FFFF00               ; GHOST 3 CONTOUR COLOR CYAN
00001000  =00000000                 38  GSTFCOL3    EQU     $00000000               ; GHOST 3 FILL COLOR
00001000  =0000001F                 39  GSTINX3     EQU     31                      ; GHOST 3 INITIAL X
00001000  =00000002                 40  GSTINY3     EQU     2                       ; GHOST 3 INITIAL Y
00001000                            41  
00001000  =000080FF                 42  GSTCOL4     EQU     $000080FF               ; GHOST 4 CONTOUR COLOR ORANGE
00001000  =00000000                 43  GSTFCOL4    EQU     $00000000               ; GHOST 4 FILL COLOR
00001000  =0000001F                 44  GSTINX4     EQU     31                      ; GHOST 4 INITIAL X
00001000  =0000001F                 45  GSTINY4     EQU     31                      ; GHOST 4 INITIAL Y 
00001000                            46  
00001000  =00800000                 47  GSTCOL5     EQU     $00800000               ; CONTOUR COLOR OF ATACKED MODE
00001000  =00000000                 48  GSTFCOL5    EQU     $00000000               ; FILL COLOR OF ATACKED MODE
00001000                            49  
00001000  =00000008                 50  GSTRAD      EQU     8                       ; GHOST RADIUS
00001000  =00000010                 51  GSTRNG      EQU     16                      ; GHOST DETECTING RANGE
00001000                            52              
00001000                            53  ; --- SCOREBOARD RELATED CONSTANTS ---------------------------------------------
00001000                            54  ;MODIFICATE
00001000                            55  
00001000  =00000000                 56  SCOFCOL     EQU     $00000000               ; TEXT BACKGROUND COLOR
00001000  =00000101                 57  SCOLINE1    EQU     $0101                   ; FIRST TEXT LINE COORDINATES
00001000  =00000102                 58  SCOLINE2    EQU     $0102                   ; SECOND TEXT LINE COORDINATES
00001000                            59  
00001000                            60  ; --- MAP RELATED CONSTANTS ----------------------------------------------------
00001000                            61  
00001000= 01 01 01 01 01 01 ...     62  MAPMAT      DC.B    $1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
00001020= 01 02 02 02 02 02 ...     63              DC.B    $1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1
00001040= 01 02 01 01 01 01 ...     64              DC.B    $1,2,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,2,1
00001060= 01 03 01 01 01 01 ...     65              DC.B    $1,3,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,3,1
00001080= 01 02 02 02 02 02 ...     66              DC.B    $1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1
000010A0= 01 02 01 01 01 01 ...     67              DC.B    $1,2,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,2,1
000010C0= 01 02 01 01 01 01 ...     68              DC.B    $1,2,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,2,1
000010E0= 01 02 02 02 02 02 ...     69              DC.B    $1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1
00001100= 01 02 01 01 01 01 ...     70              DC.B    $1,2,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,2,1
00001120= 01 02 01 00 00 00 ...     71              DC.B    $1,2,1,0,0,0,1,2,1,0,1,2,1,1,1,1,1,1,1,1,2,1,0,1,2,1,0,0,0,1,2,1
00001140= 01 02 01 01 01 01 ...     72              DC.B    $1,2,1,1,1,1,1,2,1,0,1,2,2,2,2,1,1,2,2,2,2,1,0,1,2,1,1,1,1,1,2,1
00001160= 01 02 02 02 02 02 ...     73              DC.B    $1,2,2,2,2,2,2,2,1,0,1,1,1,1,2,1,1,2,1,1,1,1,0,1,2,2,2,2,2,2,2,1
00001180= 01 01 01 01 01 01 ...     74              DC.B    $1,1,1,1,1,1,1,2,1,0,1,1,1,1,2,1,1,2,1,1,1,1,0,1,2,1,1,1,1,1,1,1
000011A0= 01 00 00 00 00 00 ...     75              DC.B    $1,0,0,0,0,0,1,2,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,2,1,0,0,0,0,0,1
000011C0= 01 00 00 00 00 00 ...     76              DC.B    $1,0,0,0,0,0,1,2,1,0,1,0,1,1,1,0,0,1,1,1,0,1,0,1,2,1,0,0,0,0,0,1
000011E0= 01 01 01 01 01 01 ...     77              DC.B    $1,1,1,1,1,1,1,2,1,1,1,0,1,0,0,0,0,0,0,1,0,1,1,1,2,1,1,1,1,1,1,1
00001200= 04 00 00 00 00 00 ...     78              DC.B    $4,0,0,0,0,0,0,2,2,2,2,0,1,0,0,0,0,0,0,1,0,2,2,2,2,0,0,0,0,0,0,4
00001220= 01 01 01 01 01 01 ...     79              DC.B    $1,1,1,1,1,1,1,2,1,1,1,0,1,0,0,0,0,0,0,1,0,1,1,1,2,1,1,1,1,1,1,1
00001240= 01 00 00 00 00 00 ...     80              DC.B    $1,0,0,0,0,0,1,2,1,0,1,0,1,1,1,1,1,1,1,1,0,1,0,1,2,1,0,0,0,0,0,1
00001260= 01 00 00 00 00 00 ...     81              DC.B    $1,0,0,0,0,0,1,2,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,2,1,0,0,0,0,0,1
00001280= 01 01 01 01 01 01 ...     82              DC.B    $1,1,1,1,1,1,1,2,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,2,1,1,1,1,1,1,1
000012A0= 01 02 02 02 02 02 ...     83              DC.B    $1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1
000012C0= 01 02 01 01 01 01 ...     84              DC.B    $1,2,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,2,1
000012E0= 01 02 01 01 01 01 ...     85              DC.B    $1,2,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,2,1
00001300= 01 02 02 02 02 01 ...     86              DC.B    $1,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,1
00001320= 01 01 01 01 02 01 ...     87              DC.B    $1,1,1,1,2,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,2,1,1,1,2,1,1,2,1,1,1,1
00001340= 01 01 01 01 02 01 ...     88              DC.B    $1,1,1,1,2,1,1,2,1,0,1,2,1,1,1,1,1,1,1,1,2,1,0,1,2,1,1,2,1,1,1,1
00001360= 01 02 02 02 02 02 ...     89              DC.B    $1,2,2,2,2,2,2,2,1,0,1,2,2,2,2,1,1,2,2,2,2,1,0,1,2,2,2,2,2,2,2,1
00001380= 01 02 01 01 01 01 ...     90              DC.B    $1,2,1,1,1,1,1,1,1,0,1,1,1,1,2,1,1,2,1,1,1,1,0,1,1,1,1,1,1,1,2,1
000013A0= 01 03 01 01 01 01 ...     91              DC.B    $1,3,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,3,1
000013C0= 01 02 02 02 02 02 ...     92              DC.B    $1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1
000013E0= 01 01 01 01 01 01 ...     93              DC.B    $1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
00001400                            94  
00001400                            95  
00001400                            96  
00001400                            97  
00001400                            98  
00001400                            99  
00001400                           100  
00001400                           101  
00001400                           102  
00001400                           103  
00001400                           104  
00001400                           105  
00001400                           106  
00001400                           107  
00001400                           108  
00001400                           109  
00001400                           110  
00001400                           111  
00001400                           112  
00001400                           113  
00001400                           114  
00001400                           115  -------------------- end include --------------------
00001400                           116              INCLUDE "GHOST.X68"
00001400                           117  ; ==============================================================================
00001400                           118  ; GHOST MANAGEMENT
00001400                           119  ; ==============================================================================
00001400                           120              
00001400                           121  ; ------------------------------------------------------------------------------
00001400                           122  GSTINIT
00001400                           123  ; INITIALIZE PADDLE.
00001400                           124  ; INPUT    : NONE 
00001400                           125  ; OUTPUT   : NONE
00001400                           126  ; MODIFIES : NONE
00001400                           127  ; ------------------------------------------------------------------------------
00001400  33FC 0058 00001F4E       128              MOVE.W  #GSTINX1*16+64-8,(GSTPOSX)
00001408  33FC 0058 00001F50       129              MOVE.W  #GSTINY1*16+64-8,(GSTPOSY)
00001410  33FC 0007 00001F52       130              MOVE.W  #GSTSPEED,(GSTVELX)
00001418  33FC 0007 00001F54       131              MOVE.W  #GSTSPEED,(GSTVELY)
00001420  4239 00001F57            132              CLR.B   (GSTLAMO)
00001426  4E75                     133              RTS
00001428                           134              
00001428                           135  ; ------------------------------------------------------------------------------
00001428                           136  GSTUPD
00001428                           137  ; UPDATES THE PADDLE.
00001428                           138  ; INPUT    : NONE 
00001428                           139  ; OUTPUT   : NONE
00001428                           140  ; MODIFIES : NONE
00001428                           141  ; ------------------------------------------------------------------------------
00001428  48E7 F800                142              MOVEM.L D0-D4,-(A7)
0000142C                           143              
0000142C  303C 0007                144              MOVE.W  #GSTSPEED,D0
00001430                           145              
00001430  3439 00001F4E            146              MOVE.W  (GSTPOSX),D2
00001436  3639 00001F50            147              MOVE.W  (GSTPOSY),D3
0000143C  5042                     148              ADDQ.W  #8,D2
0000143E  5043                     149              ADDQ.W  #8,D3
00001440                           150              
00001440  1839 00001F57            151              MOVE.B  (GSTLAMO),D4
00001446                           152              
00001446                           153              ;MASK OF THE LAST NIBBLE
00001446  C47C 000F                154              AND.W   #$000F,D2
0000144A  C67C 000F                155              AND.W   #$000F,D3
0000144E                           156              
0000144E                           157              ;CHECK IF COORDS ARE MULTIPLES OF 16
0000144E  B47C 0000                158              CMP     #$0000,D2
00001452  6600 000A                159              BNE     .GSTNOTMULT
00001456  B67C 0000                160              CMP     #$0000,D3
0000145A  6600 0002                161              BNE     .GSTNOTMULT
0000145E                           162              
0000145E                           163  .GSTNOTMULT
0000145E                           164  
0000145E  4CDF 001F                165              MOVEM.L (A7)+,D0-D4
00001462                           166              
00001462  4E75                     167              RTS
00001464                           168              
00001464                           169  ; ------------------------------------------------------------------------------
00001464                           170  GSTPLOT
00001464                           171  ; PLOT THE PADDLE.
00001464                           172  ; INPUT    : NONE 
00001464                           173  ; OUTPUT   : NONE
00001464                           174  ; MODIFIES : NONE
00001464                           175  ; ------------------------------------------------------------------------------
00001464  48E7 F800                176              MOVEM.L D0-D4,-(A7)
00001468                           177              
00001468                           178              ;SET PEN COLOR
00001468  303C 0050                179              MOVE.W  #80,D0
0000146C  223C 000000FF            180              MOVE.L  #GSTCOL1,D1
00001472  4E4F                     181              TRAP    #15
00001474                           182              
00001474                           183              ;SET FILL COLOR
00001474  303C 0051                184              MOVE.W  #81,D0
00001478  223C 00FFFFFF            185              MOVE.L  #GSTFCOL1,D1
0000147E  4E4F                     186              TRAP    #15
00001480                           187              
00001480                           188              ;SET COORDS
00001480  3239 00001F4E            189              MOVE.W  (GSTPOSX),D1
00001486  5141                     190              SUB.W   #GSTRAD,D1
00001488  3439 00001F50            191              MOVE.W  (GSTPOSY),D2
0000148E  5142                     192              SUB.W   #GSTRAD,D2
00001490                           193              
00001490  3601                     194              MOVE.W  D1,D3
00001492  0643 0010                195              ADD.W   #GSTRAD*2,D3
00001496  3802                     196              MOVE.W  D2,D4
00001498  0644 0010                197              ADD.W   #GSTRAD*2,D4
0000149C                           198              
0000149C                           199              ;DRAW GHOST
0000149C  303C 0058                200              MOVE.W  #88,D0
000014A0  4E4F                     201              TRAP    #15
000014A2                           202              
000014A2                           203              ;SET RANGE COORDS
000014A2  3239 00001F4E            204              MOVE.W  (GSTPOSX),D1
000014A8  0441 0100                205              SUB.W   #GSTRNG*16,D1
000014AC  3439 00001F50            206              MOVE.W  (GSTPOSY),D2
000014B2  0442 0100                207              SUB.W   #GSTRNG*16,D2
000014B6                           208              
000014B6  3601                     209              MOVE.W  D1,D3
000014B8  0643 0200                210              ADD.W   #GSTRNG*16*2,D3
000014BC  3802                     211              MOVE.W  D2,D4
000014BE  0644 0200                212              ADD.W   #GSTRNG*16*2,D4
000014C2                           213              
000014C2                           214              ;DRAW GHOST RANGE
000014C2  303C 005B                215              MOVE.W  #91,D0
000014C6  4E4F                     216              TRAP    #15
000014C8                           217              
000014C8  4CDF 001F                218              MOVEM.L (A7)+,D0-D4
000014CC                           219              
000014CC                           220  
000014CC  4E75                     221              RTS
000014CE                           222  
000014CE                           223  
000014CE                           224  
000014CE                           225  
000014CE                           226  -------------------- end include --------------------
000014CE                           227              INCLUDE "PAC-MAN.X68"
000014CE                           228  ; ==============================================================================
000014CE                           229  ; PAC-MAN MANAGEMENT
000014CE                           230  ; ==============================================================================
000014CE                           231              
000014CE                           232  ; ------------------------------------------------------------------------------
000014CE                           233  PMINIT
000014CE                           234  ; INITIALIZE PAC-MAN.
000014CE                           235  ; INPUT    : NONE 
000014CE                           236  ; OUTPUT   : NONE
000014CE                           237  ; MODIFIES : NONE
000014CE                           238  ; ------------------------------------------------------------------------------
000014CE                           239  
000014CE  33FC 0140 00001F44       240              MOVE.W  #SCRWIDTH/2,(PMPOSX)
000014D6  33FC 0140 00001F46       241              MOVE.W  #SCRHEIGH/2,(PMPOSY)
000014DE  5079 00001F44            242              ADDQ.W  #8,(PMPOSX)
000014E4  5079 00001F46            243              ADDQ.W  #8,(PMPOSY)
000014EA  33FC 0002 00001F48       244              MOVE.W  #PMSPEED,(PMVELX)
000014F2  33FC 0002 00001F4A       245              MOVE.W  #PMSPEED,(PMVELY)
000014FA  4239 00001F4D            246              CLR.B   (PMLAMO)
00001500                           247  
00001500  4E75                     248              RTS
00001502                           249              
00001502                           250  ; ------------------------------------------------------------------------------
00001502                           251  PMUPD
00001502                           252  ; UPDATES THE PAC-MAN.
00001502                           253  ; INPUT    : NONE 
00001502                           254  ; OUTPUT   : NONE
00001502                           255  ; MODIFIES : NONE
00001502                           256  ; ------------------------------------------------------------------------------
00001502                           257              
00001502  48E7 FE00                258              MOVEM.L D0-D6,-(A7)
00001506                           259              
00001506  303C 0002                260              MOVE.W  #PMSPEED,D0
0000150A                           261              
0000150A                           262              
0000150A  3439 00001F44            263              MOVE.W  (PMPOSX),D2
00001510  3639 00001F46            264              MOVE.W  (PMPOSY),D3
00001516                           265              
00001516  5042                     266              ADDQ.W  #8,D2              
00001518  5043                     267              ADDQ.W  #8,D3  
0000151A                           268              
0000151A  1839 00001F4D            269              MOVE.B  (PMLAMO),D4
00001520                           270              
00001520                           271              ;MASK OF THE LAST NIBBLE        
00001520  C47C 000F                272              AND.W   #$000F,D2               ; COORDENADA X
00001524  C67C 000F                273              AND.W   #$000F,D3               ; COORDENADA Y
00001528                           274              
00001528                           275              ;CHECK IF COORDS ARE MULTIPLES OF 16
00001528  B47C 0000                276              CMP     #$0000,D2
0000152C  6600 00F6                277              BNE     .NOTMULT
00001530  B67C 0000                278              CMP     #$0000,D3
00001534  6600 00EE                279              BNE     .NOTMULT
00001538                           280              
00001538                           281              ;BRA     .ACTYUP
00001538                           282  
00001538                           283              ;CHECK THE DIRECTION
00001538  0839 0000 00001B3E       284              BTST.B  #0,(KBDVAL)             ;CHECK LEFT
00001540  6700 000C                285              BEQ     .NOTLEFT
00001544  4204                     286              CLR.B   D4
00001546  183C 0000                287              MOVE.B  #0,D4
0000154A  6000 0074                288              BRA     .ACTXLEFT
0000154E                           289  .NOTLEFT            
0000154E  0839 0002 00001B3E       290              BTST.B   #2,(KBDVAL)             ;CHECK RIGHT
00001556  6700 000C                291              BEQ     .NOTRIGHT
0000155A  4204                     292              CLR.B   D4
0000155C  183C 0001                293              MOVE.B   #1,D4
00001560  6000 0032                294              BRA     .ACTXRIGHT
00001564                           295  .NOTRIGHT            
00001564  0839 0001 00001B3E       296              BTST.B   #1,(KBDVAL)             ;CHECK UP
0000156C  6700 000C                297              BEQ     .NOTUP
00001570  4204                     298              CLR.B   D4
00001572  183C 0002                299              MOVE.B  #2,D4
00001576  6000 0090                300              BRA     .ACTYUP
0000157A                           301  .NOTUP            
0000157A  0839 0003 00001B3E       302              BTST.B   #3,(KBDVAL)             ;CHECK DOWN
00001582  6700 000C                303              BEQ     .NOTDOWN
00001586  4204                     304              CLR.B   D4
00001588  183C 0003                305              MOVE.B   #3,D4
0000158C  6000 005E                306              BRA     .ACTYDOWN
00001590                           307  .NOTDOWN
00001590  6000 00A8                308              BRA     .DONE
00001594                           309              
00001594                           310              
00001594                           311              ;UPDATE COORDS
00001594                           312              
00001594                           313  .ACTXRIGHT  
00001594  4EB9 000017EA            314              JSR     COLWALLRIGHT
0000159A  BA7C 0001                315              CMP     #1,D5
0000159E  6600 0006                316              BNE     .NOTCOLISION
000015A2  303C 0000                317              MOVE.W  #0,D0
000015A6                           318  .NOTCOLISION
000015A6  BA7C 0004                319              CMP     #4,D5
000015AA  6600 000A                320              BNE     .NOTTP
000015AE  0479 01E0 00001F44       321              SUB.W   #30*16,(PMPOSX)
000015B6                           322  .NOTTP
000015B6  D179 00001F44            323              ADD.W   D0,(PMPOSX)
000015BC  6000 007C                324              BRA     .DONE
000015C0                           325  .ACTXLEFT
000015C0  4EB9 0000182C            326              JSR     COLWALLLEFT
000015C6  BA7C 0001                327              CMP     #1,D5
000015CA  6600 0006                328              BNE     .NOTCOLISION2
000015CE  303C 0000                329              MOVE.W  #0,D0
000015D2                           330  .NOTCOLISION2
000015D2  BA7C 0004                331              CMP     #4,D5
000015D6  6600 000A                332              BNE     .NOTTP2
000015DA  0679 01E0 00001F44       333              ADD.W   #30*16,(PMPOSX)
000015E2                           334  .NOTTP2
000015E2  9179 00001F44            335              SUB.W   D0,(PMPOSX)
000015E8  6000 0050                336              BRA     .DONE
000015EC                           337      
000015EC                           338  .ACTYDOWN
000015EC  4EB9 0000186E            339              JSR     COLWALLDOWN
000015F2  BA7C 0001                340              CMP     #1,D5
000015F6  6600 0006                341              BNE     .NOTCOLISION3
000015FA  303C 0000                342              MOVE.W  #0,D0
000015FE                           343  .NOTCOLISION3
000015FE  D179 00001F46            344              ADD.W   D0,(PMPOSY)
00001604  6000 0034                345              BRA     .DONE
00001608                           346  .ACTYUP     
00001608  4EB9 000018AA            347              JSR     COLWALLUP
0000160E  BA7C 0001                348              CMP     #1,D5
00001612  6600 0006                349              BNE     .NOTCOLISION4
00001616  303C 0000                350              MOVE.W  #0,D0
0000161A                           351  .NOTCOLISION4
0000161A  9179 00001F46            352              SUB.W   D0,(PMPOSY)
00001620  6000 0018                353              BRA     .DONE
00001624                           354              
00001624                           355              
00001624                           356              ;IF NOT MULT DO
00001624                           357  .NOTMULT     
00001624  B83C 0000                358              CMP.B     #0,D4
00001628  6796                     359              BEQ     .ACTXLEFT
0000162A  B83C 0001                360              CMP.B     #1,D4
0000162E  6700 FF64                361              BEQ     .ACTXRIGHT
00001632  B83C 0002                362              CMP.B     #2,D4
00001636  67D0                     363              BEQ     .ACTYUP
00001638  60B2                     364              BRA     .ACTYDOWN
0000163A                           365  .DONE
0000163A                           366              ;RESTORE
0000163A  4EB9 000018E8            367              JSR     GETPOINTS
00001640  13C4 00001F4D            368              MOVE.B  D4,(PMLAMO)
00001646                           369              
00001646  4CDF 007F                370              MOVEM.L (A7)+,D0-D6
0000164A                           371              
0000164A  4E75                     372              RTS
0000164C                           373                          
0000164C                           374  ; ------------------------------------------------------------------------------
0000164C                           375  PMPLOT
0000164C                           376  ; PLOT THE BALL.
0000164C                           377  ; INPUT    : NONE 
0000164C                           378  ; OUTPUT   : NONE
0000164C                           379  ; MODIFIES : NONE
0000164C                           380  ; ------------------------------------------------------------------------------
0000164C                           381  
0000164C  48E7 F800                382              MOVEM.L D0-D4,-(A7)
00001650                           383  
00001650                           384              ;SET PEN COLOR
00001650  303C 0050                385              MOVE.W  #80,D0
00001654  223C 0000FFFF            386              MOVE.L  #PMPCOL,D1
0000165A  4E4F                     387              TRAP    #15
0000165C                           388              
0000165C                           389              ;SET FILL COLOR
0000165C  303C 0051                390              MOVE.W  #81,D0
00001660  223C 0000FFFF            391              MOVE.L  #PMFCOL,D1
00001666  4E4F                     392              TRAP    #15
00001668                           393              
00001668                           394              ;SET COORDS
00001668  3239 00001F44            395              MOVE.W  (PMPOSX),D1
0000166E  5141                     396              SUB.W   #PMRAD,D1
00001670  3439 00001F46            397              MOVE.W  (PMPOSY),D2
00001676  5142                     398              SUB.W   #PMRAD,D2
00001678                           399              
00001678  3601                     400              MOVE.W  D1,D3
0000167A  0643 0010                401              ADD.W   #PMRAD*2,D3
0000167E  3802                     402              MOVE.W  D2,D4
00001680  0644 0010                403              ADD.W   #PMRAD*2,D4
00001684                           404                
00001684                           405              ;DRAW PAC-MAN
00001684  303C 0058                406              MOVE.W  #88,D0
00001688  4E4F                     407              TRAP    #15
0000168A                           408              
0000168A  4CDF 001F                409              MOVEM.L (A7)+,D0-D4
0000168E                           410              
0000168E  4E75                     411              RTS
00001690                           412  
00001690                           413  
00001690                           414  
00001690                           415  
00001690                           416  
00001690                           417  
00001690                           418  
00001690                           419  
00001690                           420  
00001690                           421  
00001690                           422  
00001690                           423  
00001690                           424  
00001690                           425  
00001690                           426  
00001690                           427  
00001690                           428  
00001690                           429  
00001690                           430  
00001690                           431  
00001690                           432  
00001690                           433  
00001690                           434  
00001690                           435  
00001690                           436  -------------------- end include --------------------
00001690                           437              INCLUDE "SCORE.X68"
00001690                           438  ; ==============================================================================
00001690                           439  ; SCOREBOARD MANAGEMENT
00001690                           440  ; ==============================================================================
00001690                           441              
00001690                           442  ; ------------------------------------------------------------------------------
00001690                           443  SCOINIT
00001690                           444  ; INITIALIZE SCOREBOARD
00001690                           445  ; INPUT    : NONE 
00001690                           446  ; OUTPUT   : NONE
00001690                           447  ; MODIFIES : NONE
00001690                           448  ; ------------------------------------------------------------------------------
00001690  4279 00001F5A            449              CLR.W   (SCOPOINTS)
00001696  33FC 0003 00001F58       450              MOVE.W  #3,(SCOLIFE)
0000169E  4E75                     451              RTS
000016A0                           452              
000016A0                           453  ; ------------------------------------------------------------------------------
000016A0                           454  SCOPLOT
000016A0                           455  ; PLOT THE SCOREBOARD
000016A0                           456  ; INPUT    : NONE 
000016A0                           457  ; OUTPUT   : NONE
000016A0                           458  ; MODIFIES : NONE
000016A0                           459  ; ------------------------------------------------------------------------------
000016A0                           460              
000016A0  48E7 C040                461               MOVEM.L D0-D1/A1,-(A7)
000016A4                           462  
000016A4                           463              ; SET BACKGROUND COLOR
000016A4  103C 0051                464              MOVE.B  #81,D0
000016A8  7200                     465              MOVE.L  #SCOFCOL,D1
000016AA  4E4F                     466              TRAP    #15
000016AC                           467              
000016AC                           468              ; SET FIRST LINE POSITION
000016AC  103C 000B                469              MOVE.B  #11,D0
000016B0  323C 0101                470              MOVE.W  #SCOLINE1,D1
000016B4  4E4F                     471              TRAP    #15
000016B6                           472  
000016B6                           473              ; PRINT FIRST LINE
000016B6  43F9 000016EE            474              LEA     .TXT1,A1            ;PUT FIRST STRING IN A1
000016BC  4281                     475              CLR.L   D1
000016BE  3239 00001F5A            476              MOVE.W  (SCOPOINTS),D1
000016C4  103C 0011                477              MOVE.B  #17,D0
000016C8  4E4F                     478              TRAP    #15
000016CA                           479  
000016CA                           480              ; SET SECOND LINE POSITION
000016CA  103C 000B                481              MOVE.B  #11,D0
000016CE  323C 0102                482              MOVE.W  #SCOLINE2,D1       
000016D2  4E4F                     483              TRAP    #15
000016D4                           484  
000016D4                           485              ; PRINT SECOND LINE
000016D4  43F9 000016F7            486              LEA     .TXT2,A1
000016DA  4281                     487              CLR.L   D1
000016DC  3239 00001F58            488              MOVE.W  (SCOLIFE),D1
000016E2  103C 0011                489              MOVE.B  #17,D0
000016E6  4E4F                     490              TRAP    #15
000016E8                           491              
000016E8  4CDF 0203                492              MOVEM.L (A7)+,D0-D1/A1
000016EC                           493              
000016EC  4E75                     494              RTS
000016EE                           495  
000016EE= 50 4F 49 4E 54 53 ...    496  .TXT1       DC.B    'POINTS :',0      ;0 IS END OF STRING
000016F7= 4C 49 46 45 53 20 ...    497  .TXT2       DC.B    'LIFES  :',0
00001700                           498  
00001700                           499  
00001700  4E75                     500              RTS
00001702                           501  
00001702                           502  
00001702                           503  -------------------- end include --------------------
00001702                           504              INCLUDE "SYSCONST.X68"
00001702                           505  ; ==============================================================================
00001702                           506  ; SYSTEM CONSTANTS
00001702                           507  ; ==============================================================================
00001702                           508  
00001702                           509  ; --- SCREEN RELATED CONSTANTS -------------------------------------------------
00001702                           510  
00001702  =00000280                511  SCRWIDTH    EQU     640                     ; SCREEN WIDTH
00001702  =00000280                512  SCRHEIGH    EQU     640                     ; SCREEN HEIGHT
00001702                           513  
00001702                           514  ;---KEYCODES--------------------------------------------------------------------
00001702                           515  
00001702  =00000025                516  KBDLEFT     EQU     $25
00001702  =00000026                517  KBDUP       EQU     $26
00001702  =00000027                518  KBDRIGHT    EQU     $27
00001702  =00000028                519  KBDDOWN     EQU     $28
00001702  =00000020                520  KBDFIRE1    EQU     ' '
00001702  =0000004D                521  KBDFIRE2    EQU     'M'                         
00001702  =00000010                522  KBDFIRE3    EQU     $10
00001702  =00000050                523  KBDPAUSE    EQU     'P'
00001702                           524  
00001702                           525  
00001702                           526  
00001702                           527  
00001702                           528  
00001702                           529  
00001702                           530  
00001702                           531  
00001702                           532  
00001702                           533  -------------------- end include --------------------
00001702                           534              INCLUDE "SYSTEM.X68"
00001702                           535  ; ==============================================================================
00001702                           536  ; SYSTEM
00001702                           537  ; ==============================================================================
00001702                           538              
00001702                           539  ; ------------------------------------------------------------------------------
00001702                           540  SYSINIT
00001702                           541  ; INITIALIZE SYSTEM.
00001702                           542  ; INPUT    : NONE
00001702                           543  ; OUTPUT   : NONE
00001702                           544  ; MODIFIES : NONE
00001702                           545  ; ------------------------------------------------------------------------------
00001702                           546              
00001702  21FC 00001772 0080       547              MOVE.L  #SCRUPD,($80+0*4)          ;INSTALL SUBRUTINE TO TRAP #0
0000170A  21FC 000017A2 0084       548              MOVE.L  #KBDUPD,($80+1*4)          ;INSTALL SUBRUTINE TO TRAP #1
00001712                           549              
00001712                           550              
00001712  21FC 0000178C 0064       551              MOVE.L  #SCRTIM,($60+1*4)          ;INSTALL INTERRUPT #1
0000171A                           552              
0000171A  4EB9 0000172E            553              JSR     SCRINIT
00001720  4EB9 00001794            554              JSR     KBDINIT
00001726                           555              
00001726                           556              
00001726  40E7                     557              MOVE.W  SR,-(A7)
00001728  0257 D8FF                558              ANDI.W  #$D8FF,(A7)                ;BIT SUPERVISOR TO O AND INTERRPUT MASK 000 (FOR REACTIVATE INTERRUPTIONS)             
0000172C  4E73                     559              RTE
0000172E                           560     
0000172E                           561  ; ------------------------------------------------------------------------------
0000172E                           562  SCRINIT
0000172E                           563  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN, ENABLE BUFFER
0000172E                           564  ; ENABLE TIMED INTERRUPTION
0000172E                           565  ; INPUT    : NONE
0000172E                           566  ; OUTPUT   : NONE
0000172E                           567  ; MODIFIES : NONE
0000172E                           568  ; ------------------------------------------------------------------------------
0000172E                           569  
0000172E  48E7 C000                570              MOVEM.L D0-D1,-(A7)                 ;SAFE REGISTERS IN STACK
00001732                           571  
00001732                           572              ; SET SCREEN RESOLUTION
00001732  103C 0021                573              MOVE.B  #33,D0
00001736  223C 02800280            574              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1
0000173C  4E4F                     575              TRAP    #15
0000173E                           576              
0000173E                           577              ; SET WINDOWED MODE
0000173E  7201                     578              MOVE.L  #1,D1
00001740  4E4F                     579              TRAP    #15
00001742                           580              
00001742                           581              ; ENABLE DOUBLE BUFFER
00001742  103C 005C                582              MOVE.B  #92,D0
00001746  123C 0011                583              MOVE.B  #17,D1
0000174A  4E4F                     584              TRAP    #15
0000174C                           585              
0000174C                           586              ; CLEAR SCREEN
0000174C  103C 000B                587              MOVE.B  #11,D0
00001750  323C FF00                588              MOVE.W  #$FF00,D1
00001754  4E4F                     589              TRAP    #15
00001756                           590              
00001756                           591              ;ENABLE TIMED INTERRPUT
00001756  303C 0020                592              MOVE.W  #32,D0
0000175A  123C 0006                593              MOVE.B  #6,D1
0000175E  143C 0081                594              MOVE.B  #$81,D2                   ;INDICATE THAT INTERRUPT 1 IS ACTIVATED PERIODICALLY
00001762  7614                     595              MOVE.L  #20,D3                    ;INDICATE THE MILISECONDS FOR THAT PERIOD (20 ms == 50 FPS)
00001764  4E4F                     596              TRAP    #15
00001766                           597              
00001766                           598              ;CLEAR INTERRUPT COUNTER
00001766  4239 00001B40            599              CLR.B   (SCRINTCT)
0000176C                           600              
0000176C  4CDF 0003                601              MOVEM.L (A7)+,D0-D1               ;RESTORE REGISTERS FROM STACK
00001770                           602              
00001770  4E75                     603              RTS
00001772                           604  
00001772                           605  
00001772                           606              
00001772                           607  ;------------------------------------------------------------------------------            
00001772                           608  SCRUPD
00001772                           609  ; UPDATES DOUBLE BUFFER
00001772                           610  ; INPUT    : NONE
00001772                           611  ; OUTPUT   : NONE
00001772                           612  ; MODIFIES : NONE
00001772                           613  ; ------------------------------------------------------------------------------
00001772                           614  
00001772  48E7 C000                615              MOVEM.L D0-D1,-(A7)
00001776                           616              
00001776                           617              ;SWITCH BUFFERS
00001776  103C 005E                618              MOVE.B #94,D0
0000177A  4E4F                     619              TRAP #15
0000177C                           620              
0000177C                           621              ;CLEAR HIDDEN BUFFER
0000177C  103C 000B                622              MOVE.B  #11,D0
00001780  323C FF00                623              MOVE.W  #$FF00,D1
00001784  4E4F                     624              TRAP    #15
00001786                           625              
00001786  4CDF 0003                626              MOVEM.L (A7)+,D0-D1
0000178A                           627              
0000178A  4E73                     628              RTE
0000178C                           629              
0000178C                           630  ;------------------------------------------------------------------------------            
0000178C                           631  SCRTIM
0000178C                           632  ; TIME INTERRPUT SERVICE ROUTINE FOR SYNC
0000178C                           633  ; INPUT    : NONE
0000178C                           634  ; OUTPUT   : NONE
0000178C                           635  ; MODIFIES : NONE
0000178C                           636  ; ------------------------------------------------------------------------------
0000178C                           637  
0000178C  5239 00001B40            638              ADDQ.B  #1,(SCRINTCT)
00001792  4E73                     639              RTE
00001794                           640              
00001794                           641  ;------------------------------------------------------------------------------            
00001794                           642  KBDINIT
00001794                           643  ; INIT THE KEYBOARD
00001794                           644  ; INPUT    : NONE
00001794                           645  ; OUTPUT   : NONE
00001794                           646  ; MODIFIES : NONE
00001794                           647  ; ------------------------------------------------------------------------------
00001794                           648  
00001794  4239 00001B3E            649              CLR.B   (KBDVAL)
0000179A  4239 00001B3F            650              CLR.B   (KBDEDGE)
000017A0                           651  
000017A0  4E75                     652              RTS
000017A2                           653  
000017A2                           654  ;------------------------------------------------------------------------------            
000017A2                           655  KBDUPD
000017A2                           656  ; UPDATES KEYBOARD INFO
000017A2                           657  ; 3 -> DOWN
000017A2                           658  ; 2 -> RIGHT
000017A2                           659  ; 1 -> UP
000017A2                           660  ; 0 -> LEFT
000017A2                           661  ; ------------------------------------------------------------------------------
000017A2                           662              
000017A2  48E7 F800                663              MOVEM.L D0-D4,-(A7)
000017A6                           664              
000017A6  303C 0013                665              MOVE.W  #19,D0
000017AA                           666              ;GET INFO OF THE KEYS
000017AA  223C 28272625            667              MOVE.L  #KBDDOWN<<24|KBDRIGHT<<16|KBDUP<<8|KBDLEFT,D1
000017B0  4E4F                     668              TRAP    #15
000017B2                           669              
000017B2                           670              ;CONVERT TO DESIRED FORMAT
000017B2  4EB9 000017DC            671              JSR .CONVERT
000017B8                           672  
000017B8                           673              ;GET KBDEDGE (IF SOME KEY HAVE CHANGED THE VALUE)
000017B8  1039 00001B3E            674              MOVE.B  (KBDVAL),D0             ;D0 -> LAST KBDVAL
000017BE  4600                     675              NOT.B   D0                      ;D2 -> ACTUAL KBDVAL
000017C0  C002                     676              AND.B   D2,D0
000017C2  13C0 00001B3F            677              MOVE.B  D0,(KBDEDGE)
000017C8                           678              
000017C8                           679         
000017C8  B03C 0000                680              CMP.B   #0,D0
000017CC  6700 0008                681              BEQ     .NOACT          
000017D0                           682              
000017D0                           683              ;STORE NEW KBDVAL
000017D0  13C2 00001B3E            684              MOVE.B  D2,(KBDVAL)
000017D6                           685  .NOACT
000017D6                           686              
000017D6  4CDF 001F                687              MOVEM.L (A7)+,D0-D4
000017DA                           688              
000017DA  4E73                     689              RTE    
000017DC                           690              
000017DC                           691  .CONVERT 
000017DC  363C 0003                692              MOVE.W  #3,D3
000017E0                           693              
000017E0  E189                     694  .LOOP       LSL.L   #8,D1
000017E2  E312                     695              ROXL.B  #1,D2
000017E4  51CB FFFA                696              DBRA.W  D3,.LOOP
000017E8  4E75                     697              RTS
000017EA                           698             
000017EA                           699  
000017EA                           700  ;------------------------------------------------------------------------------            
000017EA                           701  COLWALLRIGHT
000017EA                           702  ; COLLISION PAC-MAN WITH WALL
000017EA                           703  ; INPUT    : NONE
000017EA                           704  ; OUTPUT   : NONE
000017EA                           705  ; MODIFIES : NONE
000017EA                           706  ; ------------------------------------------------------------------------------
000017EA                           707  
000017EA  48E7 F800                708              MOVEM.L D0-D4,-(A7)
000017EE                           709  
000017EE  3039 00001F44            710              MOVE.W  (PMPOSX),D0
000017F4  5140                     711              SUB.W   #8,D0
000017F6  3239 00001F46            712              MOVE.W  (PMPOSY),D1
000017FC  5041                     713              ADD.W   #8,D1
000017FE                           714              
000017FE  81FC 0010                715              DIVS.W  #16,D0
00001802  83FC 0010                716              DIVS.W  #16,D1
00001806                           717              
00001806  5940                     718              SUB.W   #4,D0                   ;LI RESTAM 4 PERQUE LA MATRIU ESTA A UNA DISTANCIA DE 64 PIXELS DE LA PANTALLA
00001808  5941                     719              SUB.W   #4,D1
0000180A                           720              
0000180A  41F9 00001B41            721              LEA.L   MAPVAR,A0
00001810                           722              
00001810  5240                     723              ADD.W   #1,D0
00001812  5341                     724              SUB.W   #1,D1
00001814  C2FC 0020                725              MULU.W  #32,D1
00001818  D041                     726              ADD.W   D1,D0
0000181A                           727              
0000181A  3240                     728              MOVE.W  D0,A1
0000181C  13C0 00001F42            729              MOVE.B  D0,POSCON
00001822                           730  
00001822  1A29 1B41                731              MOVE.B  MAPVAR(A1),D5
00001826                           732              
00001826  4CDF 001F                733              MOVEM.L (A7)+,D0-D4
0000182A                           734              
0000182A  4E75                     735              RTS
0000182C                           736  
0000182C                           737  
0000182C                           738  ;------------------------------------------------------------------------------            
0000182C                           739  COLWALLLEFT
0000182C                           740  ; COLLISION PAC-MAN WITH WALL
0000182C                           741  ; INPUT    : NONE
0000182C                           742  ; OUTPUT   : NONE
0000182C                           743  ; MODIFIES : NONE
0000182C                           744  ; ------------------------------------------------------------------------------
0000182C                           745  
0000182C  48E7 F800                746              MOVEM.L D0-D4,-(A7)
00001830                           747  
00001830  3039 00001F44            748              MOVE.W  (PMPOSX),D0
00001836  5C40                     749              ADD.W   #6,D0
00001838  3239 00001F46            750              MOVE.W  (PMPOSY),D1
0000183E  5041                     751              ADD.W   #8,D1
00001840                           752              
00001840  81FC 0010                753              DIVS.W  #16,D0
00001844  83FC 0010                754              DIVS.W  #16,D1
00001848                           755              
00001848  5940                     756              SUB.W   #4,D0                   ;LI RESTAM 4 PERQUE LA MATRIU ESTA A UNA DISTANCIA DE 64 PIXELS DE LA PANTALLA
0000184A  5941                     757              SUB.W   #4,D1
0000184C                           758              
0000184C  41F9 00001B41            759              LEA.L   MAPVAR,A0
00001852                           760              
00001852  5340                     761              SUB.W   #1,D0
00001854  5341                     762              SUB.W   #1,D1
00001856  C2FC 0020                763              MULU.W  #32,D1
0000185A  D041                     764              ADD.W   D1,D0
0000185C                           765  
0000185C  3240                     766              MOVE.W  D0,A1
0000185E  13C0 00001F42            767              MOVE.B  D0,POSCON
00001864                           768  
00001864  1A29 1B41                769              MOVE.B  MAPVAR(A1),D5               
00001868                           770  
00001868                           771              
00001868  4CDF 001F                772              MOVEM.L (A7)+,D0-D4
0000186C                           773              
0000186C  4E75                     774              RTS
0000186E                           775  
0000186E                           776  ;------------------------------------------------------------------------------            
0000186E                           777  COLWALLDOWN
0000186E                           778  ; COLLISION PAC-MAN WITH WALL
0000186E                           779  ; INPUT    : NONE
0000186E                           780  ; OUTPUT   : NONE
0000186E                           781  ; MODIFIES : NONE
0000186E                           782  ; ------------------------------------------------------------------------------
0000186E                           783  
0000186E  48E7 F800                784              MOVEM.L D0-D4,-(A7)
00001872                           785  
00001872  3039 00001F44            786              MOVE.W  (PMPOSX),D0
00001878                           787              ;ADD.W   #8,D0
00001878  3239 00001F46            788              MOVE.W  (PMPOSY),D1
0000187E  5041                     789              ADD.W   #8,D1
00001880                           790              
00001880  81FC 0010                791              DIVS.W  #16,D0
00001884  83FC 0010                792              DIVS.W  #16,D1
00001888                           793              
00001888  5940                     794              SUB.W   #4,D0                   ;LI RESTAM 4 PERQUE LA MATRIU ESTA A UNA DISTANCIA DE 64 PIXELS DE LA PANTALLA
0000188A  5941                     795              SUB.W   #4,D1
0000188C                           796              
0000188C  41F9 00001B41            797              LEA.L   MAPVAR,A0
00001892                           798              
00001892  C2FC 0020                799              MULU.W  #32,D1
00001896  D041                     800              ADD.W   D1,D0
00001898                           801  
00001898  3240                     802              MOVE.W  D0,A1
0000189A  13C0 00001F42            803              MOVE.B  D0,POSCON
000018A0                           804  
000018A0  1A29 1B41                805              MOVE.B  MAPVAR(A1),D5 
000018A4                           806  
000018A4                           807              
000018A4  4CDF 001F                808              MOVEM.L (A7)+,D0-D4
000018A8                           809              
000018A8  4E75                     810              RTS
000018AA                           811  
000018AA                           812  
000018AA                           813  ;------------------------------------------------------------------------------            
000018AA                           814  COLWALLUP
000018AA                           815  ; COLLISION PAC-MAN WITH WALL
000018AA                           816  ; INPUT    : NONE
000018AA                           817  ; OUTPUT   : NONE
000018AA                           818  ; MODIFIES : NONE
000018AA                           819  ; ------------------------------------------------------------------------------
000018AA                           820  
000018AA  48E7 F800                821              MOVEM.L D0-D4,-(A7)
000018AE                           822  
000018AE  3039 00001F44            823              MOVE.W  (PMPOSX),D0
000018B4                           824              ;SUB.W   #8,D0
000018B4  3239 00001F46            825              MOVE.W  (PMPOSY),D1
000018BA  5C41                     826              ADD.W   #6,D1
000018BC                           827              
000018BC                           828              
000018BC  81FC 0010                829              DIVS.W  #16,D0
000018C0  83FC 0010                830              DIVS.W  #16,D1
000018C4                           831              
000018C4  5940                     832              SUB.W   #4,D0                   ;LI RESTAM 4 PERQUE LA MATRIU ESTA A UNA DISTANCIA DE 64 PIXELS DE LA PANTALLA
000018C6  5941                     833              SUB.W   #4,D1
000018C8                           834              
000018C8  41F9 00001B41            835              LEA.L   MAPVAR,A0
000018CE                           836              
000018CE  5341                     837              SUB.W   #1,D1
000018D0                           838              ;CMP     #1,D1
000018D0                           839              ;BLO     BUCLE4
000018D0  C2FC 0020                840              MULU.W  #32,D1
000018D4  D041                     841              ADD.W   D1,D0
000018D6                           842  
000018D6                           843  ;BUCLE4            
000018D6  3240                     844              MOVE.W  D0,A1
000018D8  13C0 00001F42            845              MOVE.B  D0,POSCON
000018DE                           846  
000018DE  1A29 1B41                847              MOVE.B  MAPVAR(A1),D5 
000018E2                           848  
000018E2                           849              ;MOVE.B  #0,D5
000018E2                           850              
000018E2  4CDF 001F                851              MOVEM.L (A7)+,D0-D4
000018E6                           852              
000018E6  4E75                     853              RTS
000018E8                           854  
000018E8                           855  
000018E8                           856  ;------------------------------------------------------------------------------            
000018E8                           857  GETPOINTS
000018E8                           858  ; COLLISION PAC-MAN WITH WALL
000018E8                           859  ; INPUT    : NONE
000018E8                           860  ; OUTPUT   : NONE
000018E8                           861  ; MODIFIES : NONE
000018E8                           862  ; ------------------------------------------------------------------------------
000018E8                           863  
000018E8  48E7 F800                864              MOVEM.L D0-D4,-(A7)
000018EC                           865  
000018EC  3039 00001F44            866              MOVE.W  (PMPOSX),D0
000018F2                           867              ;SUB.W   #8,D0
000018F2  3239 00001F46            868              MOVE.W  (PMPOSY),D1
000018F8  0641 0010                869              ADD.W   #16,D1
000018FC                           870              
000018FC                           871              
000018FC  81FC 0010                872              DIVS.W  #16,D0
00001900  83FC 0010                873              DIVS.W  #16,D1
00001904                           874              
00001904  5940                     875              SUB.W   #4,D0                   ;LI RESTAM 4 PERQUE LA MATRIU ESTA A UNA DISTANCIA DE 64 PIXELS DE LA PANTALLA
00001906  5941                     876              SUB.W   #4,D1
00001908                           877                          
00001908  5341                     878              SUB.W   #1,D1
0000190A  C2FC 0020                879              MULU.W  #32,D1
0000190E  D041                     880              ADD.W   D1,D0
00001910                           881  
00001910  3240                     882              MOVE.W  D0,A1
00001912  1A29 1B41                883              MOVE.B  MAPVAR(A1),D5
00001916                           884              
00001916  BA7C 0000                885              CMP     #0,D5
0000191A  6700 003A                886              BEQ     .DONE
0000191E  BA7C 0002                887              CMP     #2,D5
00001922  6700 0020                888              BEQ     .POINT
00001926  BA7C 0003                889              CMP     #3,D5
0000192A  6700 0006                890              BEQ     .BPOINT
0000192E  6600 0026                891              BNE     .DONE
00001932                           892  .BPOINT
00001932  137C 0000 1B41           893              MOVE.B  #0,MAPVAR(A1)
00001938  0679 0032 00001F5A       894              ADD.W   #50,(SCOPOINTS)
00001940  6600 0014                895              BNE     .DONE
00001944                           896  .POINT
00001944  137C 0000 1B41           897              MOVE.B  #0,MAPVAR(A1)
0000194A  0679 000A 00001F5A       898              ADD.W   #10,(SCOPOINTS)
00001952  6600 0002                899              BNE     .DONE            
00001956                           900  .DONE                        
00001956  4CDF 001F                901              MOVEM.L (A7)+,D0-D4
0000195A                           902              
0000195A  4E75                     903              RTS
0000195C                           904  
0000195C                           905  
0000195C                           906  
0000195C                           907  -------------------- end include --------------------
0000195C                           908              INCLUDE "MAP.X68"
0000195C                           909  
0000195C                           910  ; ------------------------------------------------------------------------------
0000195C                           911  MAPINIT
0000195C                           912  ; INIT MAP
0000195C                           913  ; INPUT    : NONE
0000195C                           914  ; OUTPUT   : NONE
0000195C                           915  ; MODIFIES : NONE
0000195C                           916  ; ------------------------------------------------------------------------------            
0000195C                           917              
0000195C                           918              ;MOVE.L  #DIBFIGWALL,($80+2*4)          ;INSTALL SUBRUTINE TO TRAP #2
0000195C                           919              ;MOVE.L  #DIBFIGPOINT,($80+3*4)          ;INSTALL SUBRUTINE TO TRAP #3
0000195C                           920              ;MOVE.L  #DIBFIGBPOINT,($80+4*4)          ;INSTALL SUBRUTINE TO TRAP #4
0000195C                           921              
0000195C  48E7 FE00                922              MOVEM.L D0-D6,-(A7)
00001960  48E7 00C0                923              MOVEM.L A0-A1,-(A7)
00001964                           924              
00001964  41F8 1000                925              LEA.L   MAPMAT,A0
00001968  43F9 00001B41            926              LEA.L   MAPVAR,A1
0000196E  3C3C 0030                927              MOVE.W  #48,D6
00001972  343C 001F                928              MOVE.W  #31,D2
00001976                           929  BUCLE_FILA
00001976  3A3C 0030                930              MOVE.W  #48,D5
0000197A  323C 001F                931              MOVE.W  #31,D1
0000197E  0646 0010                932              ADD.W   #16,D6
00001982                           933  
00001982                           934  BUCLE_COLUMNA
00001982  0645 0010                935              ADD.W   #16,D5
00001986                           936  
00001986  1018                     937              MOVE.B  (A0)+,D0
00001988  12C0                     938              MOVE.B  D0,(A1)+
0000198A                           939               
0000198A  B07C 0000                940              CMP     #0,D0
0000198E  6700 0034                941              BEQ     ZERO
00001992  B07C 0004                942              CMP     #4,D0
00001996  6700 002C                943              BEQ     ZERO
0000199A  B07C 0001                944              CMP     #1,D0
0000199E  6600 0008                945              BNE     NOTWALL
000019A2  4EB9 00001A4A            946              JSR     DIBFIGWALL
000019A8                           947  NOTWALL
000019A8  B07C 0002                948              CMP     #2,D0
000019AC  6600 0008                949              BNE     NOTPOINT
000019B0  4EB9 00001A82            950              JSR     DIBFIGPOINT
000019B6                           951  NOTPOINT
000019B6  B07C 0003                952              CMP     #3,D0
000019BA  6600 0008                953              BNE     ZERO
000019BE  4EB9 00001ABE            954              JSR     DIBFIGBPOINT
000019C4                           955           
000019C4                           956  ZERO
000019C4  51C9 FFBC                957              DBRA    D1,BUCLE_COLUMNA  
000019C8  51CA FFAC                958              DBRA    D2,BUCLE_FILA
000019CC                           959              
000019CC  4CDF 0300                960              MOVEM.L (A7)+,A0-A1
000019D0  4CDF 007F                961              MOVEM.L (A7)+,D0-D6
000019D4                           962  
000019D4                           963  
000019D4                           964              
000019D4  4E75                     965              RTS            
000019D6                           966  
000019D6                           967  ; ------------------------------------------------------------------------------
000019D6                           968  MAPPLOT
000019D6                           969  ; INIT MAP
000019D6                           970  ; INPUT    : NONE
000019D6                           971  ; OUTPUT   : NONE
000019D6                           972  ; MODIFIES : NONE
000019D6                           973  ; ------------------------------------------------------------------------------            
000019D6                           974  
000019D6  48E7 FE00                975              MOVEM.L D0-D6,-(A7)
000019DA  48E7 0080                976              MOVEM.L A0,-(A7)
000019DE                           977  
000019DE  41F9 00001B41            978              LEA.L   MAPVAR,A0
000019E4  3C3C 0030                979              MOVE.W  #48,D6
000019E8  343C 001F                980              MOVE.W  #31,D2
000019EC                           981  BUCLE_FILA2
000019EC  3A3C 0030                982              MOVE.W  #48,D5
000019F0  323C 001F                983              MOVE.W  #31,D1
000019F4  0646 0010                984              ADD.W   #16,D6
000019F8                           985  
000019F8                           986  BUCLE_COLUMNA2
000019F8  0645 0010                987              ADD.W   #16,D5       
000019FC                           988  
000019FC  1018                     989              MOVE.B  (A0)+,D0
000019FE                           990  
000019FE  B07C 0000                991              CMP     #0,D0
00001A02  6700 0034                992              BEQ     ZERO2
00001A06  B07C 0004                993              CMP     #4,D0
00001A0A  6700 002C                994              BEQ     ZERO2
00001A0E  B07C 0001                995              CMP     #1,D0
00001A12  6600 0008                996              BNE     NOTWALL2
00001A16  4EB9 00001A4A            997              JSR     DIBFIGWALL
00001A1C                           998  NOTWALL2
00001A1C  B07C 0002                999              CMP     #2,D0
00001A20  6600 0008               1000              BNE     NOTPOINT2
00001A24  4EB9 00001A82           1001              JSR     DIBFIGPOINT
00001A2A                          1002  NOTPOINT2
00001A2A  B07C 0003               1003              CMP     #3,D0
00001A2E  6600 0008               1004              BNE     ZERO2
00001A32  4EB9 00001ABE           1005              JSR     DIBFIGBPOINT
00001A38                          1006  
00001A38                          1007     
00001A38                          1008  ZERO2
00001A38  51C9 FFBE               1009              DBRA    D1,BUCLE_COLUMNA2
00001A3C                          1010              
00001A3C  51CA FFAE               1011              DBRA    D2,BUCLE_FILA2
00001A40                          1012              
00001A40  4CDF 0100               1013              MOVEM.L (A7)+,A0
00001A44  4CDF 007F               1014              MOVEM.L (A7)+,D0-D6
00001A48                          1015              
00001A48                          1016              
00001A48  4E75                    1017              RTS 
00001A4A                          1018              
00001A4A                          1019  ; -----------------------------------------------------------------------------
00001A4A                          1020  DIBFIGWALL
00001A4A                          1021  ; SUBRUTINE DRAW MAP
00001A4A                          1022  ; INPUT    : D5=POSITION X, D6=POSITION Y
00001A4A                          1023  ; OUTPUT   : NONE
00001A4A                          1024  ; MODIFIES : NONE
00001A4A                          1025  ; -----------------------------------------------------------------------------
00001A4A  48E7 FE00               1026              MOVEM.L D0-D6,-(A7)
00001A4E                          1027              ; SET CONTOURN COLOR
00001A4E  103C 0050               1028              MOVE.B  #80,D0
00001A52  223C 00AA0000           1029              MOVE.L  #$00AA0000,D1
00001A58  4E4F                    1030              TRAP    #15
00001A5A                          1031              
00001A5A                          1032              ; SET FILL COLOR
00001A5A  103C 0051               1033              MOVE.B  #81,D0
00001A5E  223C 00FF0000           1034              MOVE.L  #$00FF0000,D1
00001A64  4E4F                    1035              TRAP    #15
00001A66                          1036              
00001A66                          1037              ; DEFINE COORDINATES RECTANGLE
00001A66  3205                    1038              MOVE.W  D5,D1
00001A68  3406                    1039              MOVE.W  D6,D2
00001A6A  0645 0010               1040              ADD.W   #16,D5
00001A6E  0646 0010               1041              ADD.W   #16,D6
00001A72  3605                    1042              MOVE.W  D5,D3
00001A74  3806                    1043              MOVE.W  D6,D4
00001A76                          1044              
00001A76                          1045              ; DRAW RECTANGLE
00001A76  103C 0057               1046              MOVE.B  #87,D0
00001A7A  4E4F                    1047              TRAP    #15
00001A7C                          1048              
00001A7C  4CDF 007F               1049              MOVEM.L (A7)+,D0-D6
00001A80                          1050  
00001A80  4E75                    1051              RTS
00001A82                          1052              
00001A82                          1053  ; -----------------------------------------------------------------------------
00001A82                          1054  DIBFIGPOINT
00001A82                          1055  ; SUBRUTINE DRAW MAP
00001A82                          1056  ; INPUT    : D5=POSITION X, D6=POSITION Y
00001A82                          1057  ; OUTPUT   : NONE
00001A82                          1058  ; MODIFIES : NONE
00001A82                          1059  ; -----------------------------------------------------------------------------
00001A82  48E7 FE00               1060              MOVEM.L D0-D6,-(A7)
00001A86                          1061              ; SET CONTOURN COLOR
00001A86  103C 0050               1062              MOVE.B  #80,D0
00001A8A  223C 0000AAAA           1063              MOVE.L  #$0000AAAA,D1
00001A90  4E4F                    1064              TRAP    #15
00001A92                          1065              
00001A92                          1066              ; SET FILL COLOR
00001A92  103C 0051               1067              MOVE.B  #81,D0
00001A96  223C 0000FFFF           1068              MOVE.L  #$0000FFFF,D1
00001A9C  4E4F                    1069              TRAP    #15
00001A9E                          1070              
00001A9E                          1071              ; DEFINE COORDINATES RECTANGLE
00001A9E  3205                    1072              MOVE.W  D5,D1
00001AA0  5041                    1073              ADD.W   #8,D1
00001AA2  5541                    1074              SUB.W   #2,D1
00001AA4  3406                    1075              MOVE.W  D6,D2
00001AA6  5042                    1076              ADD.W   #8,D2
00001AA8  5542                    1077              SUB.W   #2,D2
00001AAA                          1078              
00001AAA  3601                    1079              MOVE.W  D1,D3
00001AAC  5843                    1080              ADD.W   #2*2,D3
00001AAE  3802                    1081              MOVE.W  D2,D4
00001AB0  5844                    1082              ADD.W   #2*2,D4
00001AB2                          1083              
00001AB2                          1084              ; DRAW POINT
00001AB2  103C 0058               1085              MOVE.B  #88,D0
00001AB6  4E4F                    1086              TRAP    #15
00001AB8                          1087              
00001AB8  4CDF 007F               1088              MOVEM.L (A7)+,D0-D6
00001ABC                          1089              
00001ABC  4E75                    1090              RTS
00001ABE                          1091  
00001ABE                          1092  
00001ABE                          1093  ; -----------------------------------------------------------------------------
00001ABE                          1094  DIBFIGBPOINT
00001ABE                          1095  ; SUBRUTINE DRAW MAP
00001ABE                          1096  ; INPUT    : D5=POSITION X, D6=POSITION Y
00001ABE                          1097  ; OUTPUT   : NONE
00001ABE                          1098  ; MODIFIES : NONE
00001ABE                          1099  ; -----------------------------------------------------------------------------
00001ABE  48E7 FE00               1100              MOVEM.L D0-D6,-(A7)
00001AC2                          1101              ; SET CONTOURN COLOR
00001AC2  103C 0050               1102              MOVE.B  #80,D0
00001AC6  223C 0000AAAA           1103              MOVE.L  #$0000AAAA,D1
00001ACC  4E4F                    1104              TRAP    #15
00001ACE                          1105              
00001ACE                          1106              ; SET FILL COLOR
00001ACE  103C 0051               1107              MOVE.B  #81,D0
00001AD2  223C 0000FFFF           1108              MOVE.L  #$0000FFFF,D1
00001AD8  4E4F                    1109              TRAP    #15
00001ADA                          1110              
00001ADA                          1111              ; DEFINE COORDINATES RECTANGLE
00001ADA  3205                    1112              MOVE.W  D5,D1
00001ADC  5041                    1113              ADD.W   #8,D1
00001ADE  5941                    1114              SUB.W   #4,D1
00001AE0  3406                    1115              MOVE.W  D6,D2
00001AE2  5042                    1116              ADD.W   #8,D2
00001AE4  5942                    1117              SUB.W   #4,D2
00001AE6                          1118              
00001AE6  3601                    1119              MOVE.W  D1,D3
00001AE8  5043                    1120              ADD.W   #4*2,D3
00001AEA  3802                    1121              MOVE.W  D2,D4
00001AEC  5044                    1122              ADD.W   #4*2,D4
00001AEE                          1123              
00001AEE                          1124              ; DRAW BIG POINT
00001AEE  103C 0058               1125              MOVE.B  #88,D0
00001AF2  4E4F                    1126              TRAP    #15
00001AF4                          1127              
00001AF4  4CDF 007F               1128              MOVEM.L (A7)+,D0-D6
00001AF8                          1129              
00001AF8  4E75                    1130              RTS
00001AFA                          1131  
00001AFA                          1132  
00001AFA                          1133  
00001AFA                          1134  
00001AFA                          1135  
00001AFA                          1136  
00001AFA                          1137  
00001AFA                          1138  
00001AFA                          1139  
00001AFA                          1140  
00001AFA                          1141  
00001AFA                          1142  
<<<<<<< Updated upstream
00001AFA                          1143  ; UPDATE GAME LOGIC
00001AFA                          1144  
00001AFA  4EB8 14E8               1145              JSR     PMUPD
00001AFE                          1146             ;JSR     GSTUPD
00001AFE                          1147  
00001AFE                          1148  ; --- SYNC ---------------------------------------------------------------------
00001AFE                          1149              ;WHILE THERES NO INTERRUPTS IN THE COUNTER THE PROGRAM WILL BE IN
00001AFE                          1150              ;THE BUCLE
00001AFE                          1151              
00001AFE  4A39 00001B26           1152  .WAITINIT   TST.B   (SCRINTCT)
00001B04  67F8                    1153              BEQ     .WAITINIT
00001B06  4239 00001B26           1154              CLR.B   (SCRINTCT)
00001B0C                          1155  
00001B0C                          1156  ; --- PLOT ---------------------------------------------------------------------
00001B0C                          1157              
00001B0C  4EB8 19BC               1158              JSR     MAPPLOT
00001B10  4EB8 1686               1159              JSR     SCOPLOT
00001B14  4EB8 1632               1160              JSR     PMPLOT
00001B18  4EB8 1470               1161              JSR     GSTPLOT
00001B1C                          1162              
00001B1C                          1163              
00001B1C                          1164              
00001B1C  4E40                    1165              TRAP    #0                      ;CHANGE BUFFER
00001B1E                          1166  
00001B1E  60D8                    1167              BRA     .LOOP
00001B20                          1168  
00001B20  FFFF FFFF               1169              SIMHALT  
00001B24                          1170             
00001B24                          1171              INCLUDE "SYSVARS.X68"
00001B24                          1172  ; ==============================================================================
00001B24                          1173  ; SYSTEM VARIABLES
00001B24                          1174  ; ==============================================================================
00001B24                          1175   
00001B24                          1176  ; --- KEYBOARD RELATED VARIABLES -----------------------------------------------
00001B24                          1177  
00001B24                          1178  KBDVAL      DS.B    1                       ; KEY STATE
00001B25                          1179  KBDEDGE     DS.B    1                       ; KEY EDGE
00001B26                          1180  
00001B26                          1181  ; --- TIMED INTERRUPT RELATED VARIABLES ----------------------------------------
00001B26                          1182  
00001B26                          1183  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER
00001B27                          1184              DS.B    0           
00001B27                          1185              
00001B27                          1186  ; --- MAP RELATED VARIABLE -----------------------------------------------------
00001B27                          1187  
00001B27                          1188  MAPVAR      DS.B    1024
00001F27                          1189  
00001F27                          1190              DS.B    0
00001F27                          1191  
00001F28                          1192  POSCON      DS.W    1
00001F2A                          1193  
00001F2A                          1194  
00001F2A                          1195  
00001F2A                          1196  
00001F2A                          1197  
00001F2A                          1198  -------------------- end include --------------------
00001F2A                          1199              INCLUDE "VARS.X68"
00001F2A                          1200  ; ==============================================================================
00001F2A                          1201  ; GAME VARIABLES
00001F2A                          1202  ; ==============================================================================
00001F2A                          1203  
00001F2A                          1204  ; --- PAC-MAN RELATED VARIABLES ------------------------------------------------
00001F2A                          1205  
00001F2A                          1206  PMPOSX      DS.W    1                       ; PM X COORDINATE
00001F2C                          1207  PMPOSY      DS.W    1                       ; PM Y COORDINATE
00001F2E                          1208  PMVELX      DS.W    1                       ; PM X VELOCITY
00001F30                          1209  PMVELY      DS.W    1                       ; PM Y VELOCITY
00001F32                          1210  PMEAT       DS.B    1                       ; PM BOOLEAN EAT GST
00001F33                          1211  PMLAMO      DS.B    1                       ; PM SAVE LAST MOVEMENT X O Y
00001F34                          1212              DS.B    0
00001F34                          1213  
00001F34                          1214  ; --- GHOST RELATED VARIABLES --------------------------------------------------
00001F34                          1215  
00001F34                          1216  GSTPOSX     DS.W    1                       ; GST X COORDINATE
00001F36                          1217  GSTPOSY     DS.W    1                       ; GST Y COORDINATE
00001F38                          1218  GSTVELX     DS.W    1                       ; GST X VELOCITY
00001F3A                          1219  GSTVELY     DS.W    1                       ; GST Y VELOCITY
00001F3C                          1220  GSTDEAD     DS.B    1                       ; GST BOOLEAN DEAD
00001F3D                          1221  GSTLAMO     DS.B    1                       ; GST LAST MOVEMENT (X OR Y)
00001F3E                          1222              DS.B    0
00001F3E                          1223  
00001F3E                          1224  ; --- SCOREBOARD RELATED VARIABLES ---------------------------------------------
00001F3E                          1225  
00001F3E                          1226  SCOLIFE     DS.W    1                       ; NUMBER OF LIFES
00001F40                          1227  SCOPOINTS   DS.W    1                       ; NUMBER OF POINTS
00001F42                          1228  
00001F42                          1229  
00001F42                          1230  
00001F42                          1231  
00001F42                          1232  
00001F42                          1233  
00001F42                          1234  -------------------- end include --------------------
00001F42                          1235              
00001F42                          1236              END    START        
=======
00001AFA                          1143  -------------------- end include --------------------
00001AFA                          1144              
00001AFA                          1145      
00001AFA                          1146  START:
00001AFA                          1147  
00001AFA                          1148  ;--- INITIALIZATION -----------------------------------------------------------
00001AFA                          1149  
00001AFA  007C 0700               1150              ORI.W   #$0700,SR               ;DISABLE INTERRUPTIONS
00001AFE                          1151  
00001AFE  4EB8 1702               1152              JSR     SYSINIT
00001B02  4EB8 14CE               1153              JSR     PMINIT
00001B06  4EB8 195C               1154              JSR     MAPINIT
00001B0A  4EB8 1400               1155              JSR     GSTINIT
00001B0E  4EB8 1690               1156              JSR     SCOINIT
00001B12                          1157  
00001B12                          1158  .LOOP
00001B12                          1159  
00001B12                          1160  ; --- UPDATE -------------------------------------------------------------------
00001B12                          1161  
00001B12                          1162  ; READ INPUT DEVICES
00001B12                          1163  
00001B12  4E41                    1164              TRAP    #1
00001B14                          1165  
00001B14                          1166  ; UPDATE GAME LOGIC
00001B14                          1167  
00001B14  4EB8 1502               1168              JSR     PMUPD
00001B18                          1169              ;JSR     GSTUPD
00001B18                          1170              ;JSR     MAPINIT
00001B18                          1171  
00001B18                          1172  ; --- SYNC ---------------------------------------------------------------------
00001B18                          1173              ;WHILE THERES NO INTERRUPTS IN THE COUNTER THE PROGRAM WILL BE IN
00001B18                          1174              ;THE BUCLE
00001B18                          1175              
00001B18  4A39 00001B40           1176  .WAITINIT   TST.B   (SCRINTCT)
00001B1E  67F8                    1177              BEQ     .WAITINIT
00001B20  4239 00001B40           1178              CLR.B   (SCRINTCT)
00001B26                          1179  
00001B26                          1180  ; --- PLOT ---------------------------------------------------------------------
00001B26                          1181              
00001B26  4EB8 19D6               1182              JSR     MAPPLOT
00001B2A  4EB8 16A0               1183              JSR     SCOPLOT
00001B2E  4EB8 164C               1184              JSR     PMPLOT
00001B32  4EB8 1464               1185              JSR     GSTPLOT
00001B36                          1186              
00001B36                          1187              
00001B36                          1188              
00001B36  4E40                    1189              TRAP    #0                      ;CHANGE BUFFER
00001B38                          1190  
00001B38  60D8                    1191              BRA     .LOOP
00001B3A                          1192  
00001B3A  FFFF FFFF               1193              SIMHALT  
00001B3E                          1194             
00001B3E                          1195              INCLUDE "SYSVARS.X68"
00001B3E                          1196  ; ==============================================================================
00001B3E                          1197  ; SYSTEM VARIABLES
00001B3E                          1198  ; ==============================================================================
00001B3E                          1199   
00001B3E                          1200  ; --- KEYBOARD RELATED VARIABLES -----------------------------------------------
00001B3E                          1201  
00001B3E                          1202  KBDVAL      DS.B    1                       ; KEY STATE
00001B3F                          1203  KBDEDGE     DS.B    1                       ; KEY EDGE
00001B40                          1204  
00001B40                          1205  ; --- TIMED INTERRUPT RELATED VARIABLES ----------------------------------------
00001B40                          1206  
00001B40                          1207  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER
00001B41                          1208              DS.B    0           
00001B41                          1209              
00001B41                          1210  ; --- MAP RELATED VARIABLE -----------------------------------------------------
00001B41                          1211  
00001B41                          1212  MAPVAR      DS.B    1024
00001F41                          1213  
00001F41                          1214              DS.B    0
00001F41                          1215  
00001F42                          1216  POSCON      DS.W    1
00001F44                          1217  
00001F44                          1218  
00001F44                          1219  
00001F44                          1220  
00001F44                          1221  
00001F44                          1222  -------------------- end include --------------------
00001F44                          1223              INCLUDE "VARS.X68"
00001F44                          1224  ; ==============================================================================
00001F44                          1225  ; GAME VARIABLES
00001F44                          1226  ; ==============================================================================
00001F44                          1227  
00001F44                          1228  ; --- PAC-MAN RELATED VARIABLES ------------------------------------------------
00001F44                          1229  
00001F44                          1230  PMPOSX      DS.W    1                       ; PM X COORDINATE
00001F46                          1231  PMPOSY      DS.W    1                       ; PM Y COORDINATE
00001F48                          1232  PMVELX      DS.W    1                       ; PM X VELOCITY
00001F4A                          1233  PMVELY      DS.W    1                       ; PM Y VELOCITY
00001F4C                          1234  PMEAT       DS.B    1                       ; PM BOOLEAN EAT GST
00001F4D                          1235  PMLAMO      DS.B    1                       ; PM SAVE LAST MOVEMENT X O Y
00001F4E                          1236              DS.B    0
00001F4E                          1237  
00001F4E                          1238  ; --- GHOST RELATED VARIABLES --------------------------------------------------
00001F4E                          1239  
00001F4E                          1240  GSTPOSX     DS.W    1                       ; GST X COORDINATE
00001F50                          1241  GSTPOSY     DS.W    1                       ; GST Y COORDINATE
00001F52                          1242  GSTVELX     DS.W    1                       ; GST X VELOCITY
00001F54                          1243  GSTVELY     DS.W    1                       ; GST Y VELOCITY
00001F56                          1244  GSTDEAD     DS.B    1                       ; GST BOOLEAN DEAD
00001F57                          1245  GSTLAMO     DS.B    1                       ; GST LAST MOVEMENT (X OR Y)
00001F58                          1246              DS.B    0
00001F58                          1247  
00001F58                          1248  ; --- SCOREBOARD RELATED VARIABLES ---------------------------------------------
00001F58                          1249  
00001F58                          1250  SCOLIFE     DS.W    1                       ; NUMBER OF LIFES
00001F5A                          1251  SCOPOINTS   DS.W    1                       ; NUMBER OF POINTS
00001F5C                          1252  
00001F5C                          1253  
00001F5C                          1254  
00001F5C                          1255  
00001F5C                          1256  
00001F5C                          1257  
00001F5C                          1258  -------------------- end include --------------------
00001F5C                          1259              
00001F5C                          1260              END    START        
>>>>>>> Stashed changes

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
BUCLE_COLUMNA       1982
BUCLE_COLUMNA2      19F8
BUCLE_FILA          1976
BUCLE_FILA2         19EC
COLWALLDOWN         186E
COLWALLLEFT         182C
COLWALLRIGHT        17EA
COLWALLUP           18AA
DIBFIGBPOINT        1ABE
DIBFIGPOINT         1A82
DIBFIGWALL          1A4A
GETPOINTS           18E8
GETPOINTS:BPOINT    1932
GETPOINTS:DONE      1956
GETPOINTS:POINT     1944
GSTCOL1             FF
GSTCOL2             FF0080
GSTCOL3             FFFF00
GSTCOL4             80FF
GSTCOL5             800000
GSTDEAD             1F56
GSTFCOL1            FFFFFF
GSTFCOL2            0
GSTFCOL3            0
GSTFCOL4            0
GSTFCOL5            0
GSTINIT             1400
GSTINX1             2
GSTINX2             2
GSTINX3             1F
GSTINX4             1F
GSTINY1             2
GSTINY2             1F
GSTINY3             2
GSTINY4             1F
GSTLAMO             1F57
GSTPLOT             1464
GSTPOSX             1F4E
GSTPOSY             1F50
GSTRAD              8
GSTRNG              10
GSTSPEED            7
GSTSPEED2           5
GSTUPD              1428
GSTUPD:GSTNOTMULT   145E
GSTVELX             1F52
GSTVELY             1F54
KBDDOWN             28
KBDEDGE             1B3F
KBDFIRE1            20
KBDFIRE2            4D
KBDFIRE3            10
KBDINIT             1794
KBDLEFT             25
KBDPAUSE            50
KBDRIGHT            27
KBDUP               26
KBDUPD              17A2
KBDUPD:CONVERT      17DC
KBDUPD:LOOP         17E0
KBDUPD:NOACT        17D6
KBDVAL              1B3E
MAPINIT             195C
MAPMAT              1000
MAPPLOT             19D6
MAPVAR              1B41
NOTPOINT            19B6
NOTPOINT2           1A2A
NOTWALL             19A8
NOTWALL2            1A1C
PMEAT               1F4C
PMFCOL              FFFF
PMINIT              14CE
PMLAMO              1F4D
PMPCOL              FFFF
PMPLOT              164C
PMPOSX              1F44
PMPOSY              1F46
PMRAD               8
PMSPEED             2
PMUPD               1502
PMUPD:ACTXLEFT      15C0
PMUPD:ACTXRIGHT     1594
PMUPD:ACTYDOWN      15EC
PMUPD:ACTYUP        1608
PMUPD:DONE          163A
PMUPD:NOTCOLISION   15A6
PMUPD:NOTCOLISION2  15D2
PMUPD:NOTCOLISION3  15FE
PMUPD:NOTCOLISION4  161A
PMUPD:NOTDOWN       1590
PMUPD:NOTLEFT       154E
PMUPD:NOTMULT       1624
PMUPD:NOTRIGHT      1564
PMUPD:NOTTP         15B6
PMUPD:NOTTP2        15E2
PMUPD:NOTUP         157A
PMVELX              1F48
PMVELY              1F4A
POSCON              1F42
SCOFCOL             0
SCOINIT             1690
SCOLIFE             1F58
SCOLINE1            101
SCOLINE2            102
SCOPLOT             16A0
SCOPLOT:TXT1        16EE
SCOPLOT:TXT2        16F7
SCOPOINTS           1F5A
SCRHEIGH            280
SCRINIT             172E
SCRINTCT            1B40
SCRTIM              178C
SCRUPD              1772
SCRWIDTH            280
START               1AFA
START:LOOP          1B12
START:WAITINIT      1B18
SYSINIT             1702
ZERO                19C4
ZERO2               1A38
