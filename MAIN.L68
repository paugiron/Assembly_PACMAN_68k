00001102 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 10/11/2022 10:26:29

00000000                             1  ; ==============================================================================
00000000                             2  ; TITLE       : PAC-MAN 68000
00000000                             3  ; DESCRIPTION : GAME IN MOTOROLA 68000 BASED ON PAC-MAN GAME
00000000                             4  ; AUTHOR      : JORDI FLORIT ENSENYAT
00000000                             5  ;               JOSEP GABRIEL FORN�S REYN�S
00000000                             6  ;               PAU GIR�N RODR�GUEZ
00000000                             7  ; ==============================================================================
00001000                             8              ORG    $1000
00001000                             9  
00001000                            10              INCLUDE "CONST.X68"
00001000                            11  ; ==============================================================================
00001000                            12  ; GAME CONSTANTS
00001000                            13  ; ==============================================================================
00001000                            14  
00001000                            15  ; --- PAC-MAN RELATED CONTANTS ----------------------------------------------------
00001000                            16  
00001000  =00FFCC00                 17  PMPCOL      EQU     $00FFCC00               ; PAC-MAN CONTOUR COLOR
00001000  =00FFFF00                 18  PMFCOL      EQU     $00FFFF00               ; PAC-MAN FILL COLOR
00001000  =00000003                 19  PMSPEED     EQU     3                       ; MAGNITUDE OF THE X AND Y VEL.
00001000  =00000008                 20  PMRAD       EQU     8                       ; PAC-MAN RADIUS
00001000                            21  
00001000                            22  ; --- GHOST RELATED CONSTANTS ----------------------------------------------------
00001000                            23  
00001000  =00000007                 24  GSTSPEED    EQU     7                       ; MAGNITUDE OF THE NORMAL DISPLACEMENT
00001000  =00000005                 25  GSTSPEED2   EQU     5                       ; MAGNITUDE OF THE ATACKED DISPLACEMENT
00001000                            26  
00001000  =00FF0000                 27  GSTCOL1     EQU     $00FF0000               ; GHOST 1 CONTOUR COLOR RED
00001000  =00000000                 28  GSTFCOL1    EQU     $00000000               ; GHOST 1 FILL COLOR
00001000                            29  
00001000  =00FF0080                 30  GSTCOL2     EQU     $00FF0080               ; GHOST 2 CONTOUR COLOR PINK
00001000  =00000000                 31  GSTFCOL2    EQU     $00000000               ; GHOST 1 FILL COLOR
00001000                            32  
00001000  =00FFFF00                 33  GSTCOL3     EQU     $00FFFF00               ; GHOST 3 CONTOUR COLOR CYAN
00001000  =00000000                 34  GSTFCOL3    EQU     $00000000               ; GHOST 3 FILL COLOR
00001000                            35  
00001000  =000080FF                 36  GSTCOL4     EQU     $000080FF               ; GHOST 4 CONTOUR COLOR ORANGE
00001000  =00000000                 37  GSTFCOL4    EQU     $00000000               ; GHOST 4 FILL COLOR 
00001000                            38  
00001000  =00800000                 39  GSTCOL5     EQU     $00800000               ; COLOR OF ATACKED MODE
00001000                            40  
00001000                            41  ; --- SCOREBOARD RELATED CONSTANTS ---------------------------------------------
00001000                            42  ;MODIFICATE
00001000                            43  
00001000  =00000000                 44  SCOFCOL     EQU     $00000000               ; TEXT BACKGROUND COLOR
00001000  =00000101                 45  SCOLINE1    EQU     $0101                   ; FIRST TEXT LINE COORDINATES
00001000  =00000102                 46  SCOLINE2    EQU     $0102                   ; SECOND TEXT LINE COORDINATES
00001000                            47  
00001000                            48  
00001000                            49  -------------------- end include --------------------
00001000                            50              INCLUDE "GHOST.X68"
00001000                            51  ; ==============================================================================
00001000                            52  ; GHOST MANAGEMENT
00001000                            53  ; ==============================================================================
00001000                            54              
00001000                            55  ; ------------------------------------------------------------------------------
00001000                            56  GSTINIT
00001000                            57  ; INITIALIZE PADDLE.
00001000                            58  ; INPUT    : NONE 
00001000                            59  ; OUTPUT   : NONE
00001000                            60  ; MODIFIES : NONE
00001000                            61  ; ------------------------------------------------------------------------------
00001000  4E75                      62              RTS
00001002                            63              
00001002                            64  ; ------------------------------------------------------------------------------
00001002                            65  GSTUPD
00001002                            66  ; UPDATES THE PADDLE.
00001002                            67  ; INPUT    : NONE 
00001002                            68  ; OUTPUT   : NONE
00001002                            69  ; MODIFIES : NONE
00001002                            70  ; ------------------------------------------------------------------------------
00001002  4E75                      71              RTS
00001004                            72              
00001004                            73  ; ------------------------------------------------------------------------------
00001004                            74  GSTPLOT
00001004                            75  ; PLOT THE PADDLE.
00001004                            76  ; INPUT    : NONE 
00001004                            77  ; OUTPUT   : NONE
00001004                            78  ; MODIFIES : NONE
00001004                            79  ; ------------------------------------------------------------------------------
00001004  4E75                      80              RTS
00001004  4E75                      81  -------------------- end include --------------------
00001006                            82              INCLUDE "PAC-MAN.X68"
00001006                            83  ; ==============================================================================
00001006                            84  ; PAC-MAN MANAGEMENT
00001006                            85  ; ==============================================================================
00001006                            86              
00001006                            87  ; ------------------------------------------------------------------------------
00001006                            88  PMINIT
00001006                            89  ; INITIALIZE PAC-MAN.
00001006                            90  ; INPUT    : NONE 
00001006                            91  ; OUTPUT   : NONE
00001006                            92  ; MODIFIES : NONE
00001006                            93  ; ------------------------------------------------------------------------------
00001006                            94  
00001006  33FC 0140 000010EA        95              MOVE.W  #SCRWIDTH/2,(PMPOSX)
0000100E  33FC 00F0 000010EC        96              MOVE.W  #SCRHEIGH/2,(PMPOSY)
00001016  33FC 0003 000010EE        97              MOVE.W  #PMSPEED,(PMVELX)
0000101E  33FC 0003 000010F0        98              MOVE.W  #PMSPEED,(PMVELY)
00001026                            99  
00001026  4E75                     100              RTS
00001028                           101              
00001028                           102  ; ------------------------------------------------------------------------------
00001028                           103  PMUPD
00001028                           104  ; UPDATES THE PAC-MAN.
00001028                           105  ; INPUT    : NONE 
00001028                           106  ; OUTPUT   : NONE
00001028                           107  ; MODIFIES : NONE
00001028                           108  ; ------------------------------------------------------------------------------
00001028  4E75                     109              RTS
0000102A                           110              
0000102A                           111  ; ------------------------------------------------------------------------------
0000102A                           112  PMPLOT
0000102A                           113  ; PLOT THE BALL.
0000102A                           114  ; INPUT    : NONE 
0000102A                           115  ; OUTPUT   : NONE
0000102A                           116  ; MODIFIES : NONE
0000102A                           117  ; ------------------------------------------------------------------------------
0000102A                           118  
0000102A  48E7 F800                119              MOVEM.L D0-D4,-(A7)
0000102E                           120  
0000102E                           121              ;SET PEN COLOR
0000102E  303C 0050                122              MOVE.W  #80,D0
00001032  223C 00FFCC00            123              MOVE.L  #PMPCOL,D1
00001038  4E4F                     124              TRAP    #15
0000103A                           125              
0000103A                           126              ;SET FILL COLOR
0000103A  303C 0051                127              MOVE.W  #81,D0
0000103E  223C 00FFFF00            128              MOVE.L  #PMFCOL,D1
00001044  4E4F                     129              TRAP    #15
00001046                           130              
00001046                           131              ;SET COORDS
00001046  3239 000010EA            132              MOVE.W  (PMPOSX),D1
0000104C  5141                     133              SUB.W   #PMRAD,D1
0000104E  3439 000010EC            134              MOVE.W  (PMPOSY),D2
00001054  5142                     135              SUB.W   #PMRAD,D2
00001056                           136              
00001056  3601                     137              MOVE.W  D1,D3
00001058  0643 0010                138              ADD.W   #PMRAD*2,D3
0000105C  3802                     139              MOVE.W  D2,D4
0000105E  0644 0010                140              ADD.W   #PMRAD*2,D4
00001062                           141                
00001062                           142              ;DRAW PAC-MAN
00001062  303C 0058                143              MOVE.W  #88,D0
00001066  4E4F                     144              TRAP    #15
00001068                           145              
00001068  4CDF 001F                146              MOVEM.L (A7)+,D0-D4
0000106C                           147              
0000106C  4E75                     148              RTS
0000106E                           149  
0000106E                           150  
0000106E                           151  -------------------- end include --------------------
0000106E                           152              INCLUDE "SCORE.X68"
0000106E                           153  ; ==============================================================================
0000106E                           154  ; SCOREBOARD MANAGEMENT
0000106E                           155  ; ==============================================================================
0000106E                           156              
0000106E                           157  ; ------------------------------------------------------------------------------
0000106E                           158  SCOINIT
0000106E                           159  ; INITIALIZE SCOREBOARD
0000106E                           160  ; INPUT    : NONE 
0000106E                           161  ; OUTPUT   : NONE
0000106E                           162  ; MODIFIES : NONE
0000106E                           163  ; ------------------------------------------------------------------------------
0000106E  4E75                     164              RTS
00001070                           165              
00001070                           166  ; ------------------------------------------------------------------------------
00001070                           167  SCOPLOT
00001070                           168  ; PLOT THE SCOREBOARD
00001070                           169  ; INPUT    : NONE 
00001070                           170  ; OUTPUT   : NONE
00001070                           171  ; MODIFIES : NONE
00001070                           172  ; ------------------------------------------------------------------------------
00001070  4E75                     173              RTS
00001070  4E75                     174  -------------------- end include --------------------
00001072                           175              INCLUDE "SYSCONST.X68"
00001072                           176  ; ==============================================================================
00001072                           177  ; SYSTEM CONSTANTS
00001072                           178  ; ==============================================================================
00001072                           179  
00001072                           180  ; --- SCREEN RELATED CONSTANTS -------------------------------------------------
00001072                           181  
00001072  =00000280                182  SCRWIDTH    EQU     640                     ; SCREEN WIDTH
00001072  =000001E0                183  SCRHEIGH    EQU     480                     ; SCREEN HEIGHT
00001072                           184  
00001072                           185  
00001072                           186  -------------------- end include --------------------
00001072                           187              INCLUDE "SYSTEM.X68"
00001072                           188  ; ==============================================================================
00001072                           189  ; SYSTEM
00001072                           190  ; ==============================================================================
00001072                           191              
00001072                           192  ; ------------------------------------------------------------------------------
00001072                           193  SYSINIT
00001072                           194  ; INITIALIZE SYSTEM.
00001072                           195  ; INPUT    : NONE
00001072                           196  ; OUTPUT   : NONE
00001072                           197  ; MODIFIES : NONE
00001072                           198  ; ------------------------------------------------------------------------------
00001072                           199              
00001072  21FC 000010CC 0080       200              MOVE.L  #SCRUPD,($80+0*4)          ;INSTALL SUBRUTINE TO TRAP #0
0000107A                           201              
0000107A  4EB9 00001088            202              JSR     SCRINIT
00001080                           203              
00001080  40E7                     204              MOVE.W  SR,-(A7)
00001082  0257 D8FF                205              ANDI.W  #$D8FF,(A7)                ;BIT SUPERVISOR TO O AND INTERRPUT MASK 000 (FOR REACTIVATE INTERRUPTIONS)             
00001086  4E73                     206              RTE
00001088                           207     
00001088                           208  ; ------------------------------------------------------------------------------
00001088                           209  SCRINIT
00001088                           210  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN, ENABLE BUFFER
00001088                           211  ; ENABLE TIMED INTERRUPTION
00001088                           212  ; INPUT    : NONE
00001088                           213  ; OUTPUT   : NONE
00001088                           214  ; MODIFIES : NONE
00001088                           215  ; ------------------------------------------------------------------------------
00001088                           216  
00001088  48E7 C000                217              MOVEM.L D0-D1,-(A7)                 ;SAFE REGISTERS IN STACK
0000108C                           218  
0000108C                           219              ; SET SCREEN RESOLUTION
0000108C  103C 0021                220              MOVE.B  #33,D0
00001090  223C 028001E0            221              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1
00001096  4E4F                     222              TRAP    #15
00001098                           223              
00001098                           224              ; SET WINDOWED MODE
00001098  7201                     225              MOVE.L  #1,D1
0000109A  4E4F                     226              TRAP    #15
0000109C                           227              
0000109C                           228              ; ENABLE DOUBLE BUFFER
0000109C  103C 005C                229              MOVE.B  #92,D0
000010A0  123C 0011                230              MOVE.B  #17,D1
000010A4  4E4F                     231              TRAP    #15
000010A6                           232              
000010A6                           233              ; CLEAR SCREEN
000010A6  103C 000B                234              MOVE.B  #11,D0
000010AA  323C FF00                235              MOVE.W  #$FF00,D1
000010AE  4E4F                     236              TRAP    #15
000010B0                           237              
000010B0                           238              ;ENABLE TIMED INTERRPUT
000010B0  303C 0020                239              MOVE.W  #32,D0
000010B4  123C 0006                240              MOVE.B  #6,D1
000010B8  143C 0081                241              MOVE.B  #$81,D2                   ;INDICATE THAT INTERRUPT 1 IS ACTIVATED PERIODICALLY
000010BC  7614                     242              MOVE.L  #20,D3                    ;INDICATE THE MILISECONDS FOR THAT PERIOD
000010BE  4E4F                     243              TRAP    #15
000010C0                           244              
000010C0                           245              ;CLEAR INTERRUPT COUNTER
000010C0  4239 000010E8            246              CLR.B   (SCRINTCT)
000010C6                           247              
000010C6  4CDF 0003                248              MOVEM.L (A7)+,D0-D1                 ;RESTORE REGISTERS FROM STACK
000010CA                           249              
000010CA  4E75                     250              RTS
000010CC                           251              
000010CC                           252  ;------------------------------------------------------------------------------            
000010CC                           253  SCRUPD
000010CC                           254  ; UPDATES DOUBLE BUFFER
000010CC                           255  ; INPUT    : NONE
000010CC                           256  ; OUTPUT   : NONE
000010CC                           257  ; MODIFIES : NONE
000010CC                           258  ; ------------------------------------------------------------------------------
000010CC                           259  
000010CC  48A7 C000                260              MOVEM.W D0-D1,-(A7)
000010D0                           261              
000010D0                           262              ;SWITCH BUFFERS
000010D0  103C 005E                263              MOVE.B #94,D0
000010D4  4E4F                     264              TRAP #15
000010D6                           265              
000010D6                           266              ;CLEAR HIDDEN BUFFER
000010D6  103C 000B                267              MOVE.B  #11,D0
000010DA  323C FF00                268              MOVE.W  #$FF00,D1
000010DE  4E4F                     269              TRAP    #15
000010E0                           270              
000010E0  4C9F 0003                271              MOVEM.W (A7)+,D0-D1
000010E4                           272              
000010E4  4E73                     273              RTE
000010E6                           274  
000010E6                           275  
000010E6                           276  
000010E6                           277  
000010E6                           278  
000010E6                           279  -------------------- end include --------------------
000010E6                           280              INCLUDE "SYSVARS.X68"
000010E6                           281  ; ==============================================================================
000010E6                           282  ; SYSTEM VARIABLES
000010E6                           283  ; ==============================================================================
000010E6                           284   
000010E6                           285  ; --- KEYBOARD RELATED VARIABLES -----------------------------------------------
000010E6                           286  
000010E6                           287  KBDVAL      DS.B    1                       ; KEY STATE
000010E7                           288  KBDEDGE     DS.B    1                       ; KEY EDGE
000010E8                           289  
000010E8                           290  ; --- TIMED INTERRUPT RELATED VARIABLES ----------------------------------------
000010E8                           291  
000010E8                           292  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER
000010EA                           293              DS.W    0           
000010EA                           294  
000010EA                           295  
000010EA                           296  -------------------- end include --------------------
000010EA                           297              INCLUDE "VARS.X68"
000010EA                           298  ; ==============================================================================
000010EA                           299  ; GAME VARIABLES
000010EA                           300  ; ==============================================================================
000010EA                           301  
000010EA                           302  ; --- PAC-MAN RELATED VARIABLES ------------------------------------------------
000010EA                           303  
000010EA                           304  PMPOSX      DS.W    1                       ; PM X COORDINATE
000010EC                           305  PMPOSY      DS.W    1                       ; PM Y COORDINATE
000010EE                           306  PMVELX      DS.W    1                       ; PM X VELOCITY
000010F0                           307  PMVELY      DS.W    1                       ; PM Y VELOCITY
000010F2                           308  PMEAT       DS.B    1                       ; PM BOOLEAN EAT GST
000010F3                           309  
000010F3                           310  ; --- GHOST RELATED VARIABLES --------------------------------------------------
000010F3                           311  
000010F4                           312  GSTPOSX     DS.W    1                       ; GST X COORDINATE
000010F6                           313  GSTPOSY     DS.W    1                       ; GST Y COORDINATE
000010F8                           314  GSTVELX     DS.W    1                       ; GST X VELOCITY
000010FA                           315  GSTVELY     DS.W    1                       ; GST Y VELOCITY
000010FC                           316  GSTDEAD     DS.B    1                       ; GST BOOLEAN DEAD
000010FD                           317  
000010FD                           318  ; --- SCOREBOARD RELATED VARIABLES ---------------------------------------------
000010FD                           319  
000010FE                           320  SCOLIFE     DS.W    1                       ; NUMBER OF LIFES
00001100                           321  SCOBNS      DS.W    1                       ; NUMBER OF BONUS
00001102                           322  
00001102                           323  -------------------- end include --------------------
00001102                           324      
00001102                           325  START:
00001102                           326  
00001102                           327  ;--- INITIALIZATION -----------------------------------------------------------
00001102                           328  
00001102  007C 0700                329              ORI.W   #$0700,SR               ;DISABLE INTERRUPTIONS
00001106                           330  
00001106  4EB8 1072                331              JSR     SYSINIT
0000110A  4EB8 1006                332              JSR     PMINIT
0000110E  4EB8 1000                333              JSR     GSTINIT
00001112  4EB8 106E                334              JSR     SCOINIT
00001116                           335  
00001116                           336  .LOOP
00001116                           337  
00001116                           338  ; --- UPDATE -------------------------------------------------------------------
00001116                           339  
00001116                           340  ; READ INPUT DEVICES
00001116                           341  
00001116                           342  
00001116                           343  
00001116                           344  ; UPDATE GAME LOGIC
00001116                           345  
00001116  4EB8 1028                346              JSR     PMUPD
0000111A  4EB8 1002                347              JSR     GSTUPD            
0000111E                           348  
0000111E                           349  ; --- SYNC ---------------------------------------------------------------------
0000111E                           350  
0000111E                           351  ; --- PLOT ---------------------------------------------------------------------
0000111E                           352  
0000111E  4EB8 1070                353              JSR     SCOPLOT
00001122  4EB8 102A                354              JSR     PMPLOT
00001126  4EB8 1004                355              JSR     GSTPLOT
0000112A                           356  
0000112A  60EA                     357              BRA     .LOOP
0000112C                           358  
0000112C                           359  
0000112C                           360           
0000112C                           361  
0000112C  FFFF FFFF                362              SIMHALT             
00001130                           363  
00001130                           364              END    START        

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
GSTCOL1             FF0000
GSTCOL2             FF0080
GSTCOL3             FFFF00
GSTCOL4             80FF
GSTCOL5             800000
GSTDEAD             10FC
GSTFCOL1            0
GSTFCOL2            0
GSTFCOL3            0
GSTFCOL4            0
GSTINIT             1000
GSTPLOT             1004
GSTPOSX             10F4
GSTPOSY             10F6
GSTSPEED            7
GSTSPEED2           5
GSTUPD              1002
GSTVELX             10F8
GSTVELY             10FA
KBDEDGE             10E7
KBDVAL              10E6
PMEAT               10F2
PMFCOL              FFFF00
PMINIT              1006
PMPCOL              FFCC00
PMPLOT              102A
PMPOSX              10EA
PMPOSY              10EC
PMRAD               8
PMSPEED             3
PMUPD               1028
PMVELX              10EE
PMVELY              10F0
SCOBNS              1100
SCOFCOL             0
SCOINIT             106E
SCOLIFE             10FE
SCOLINE1            101
SCOLINE2            102
SCOPLOT             1070
SCRHEIGH            1E0
SCRINIT             1088
SCRINTCT            10E8
SCRUPD              10CC
SCRWIDTH            280
START               1102
START:LOOP          1116
SYSINIT             1072
